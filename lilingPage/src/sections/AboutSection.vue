

<template>
  <div id="SectionRoot">
      <div>
        <p style="font-size:3rem;color: hsla(160, 100%, 37%, 1);font-weight: bold;" class="observe-animation fade-up">å…³äº</p>
        <p style="font-size: 2rem;" class="observe-animation fade-up">å“ˆå–½&nbsp;,&nbsp;æˆ‘æ˜¯&nbsp;<span class="LilingSpan observe-animation fade-up"> LiLing </span>&nbsp;ğŸ‘»</p>
        <p style="font-size: 2rem;" class="observe-animation fade-up">èŠèŠæˆ‘è‡ªå·±</p>
        <div style="text-align: center;margin-top: -1rem;">
          <div class="IntroduceContent observe-animation fade-up">
            <p style="margin-bottom: 10px;font-size: 1.3rem;font-weight: bold;">ä¸€ä¸ª<span class="GIESpan">åœ°ç©ºï¼ˆGISå·¥ç§‘ç‰ˆï¼‰</span>å¤§å­¦ç”Ÿï¼Œ<span class="zjwzSpan">æ¸©å·ç‘å®‰grilğŸ™â€â™€ï¸</span>ã€‚åƒé‡Œè¿¢è¿¢ï¼ˆ1072kmï¼‰æ¥åˆ°æ¹–å—ç›Šé˜³ä¸Šå­¦</p>
            <p>å¦‚æœè¦é—®æˆ‘ä¸ºä»€ä¹ˆè¦ğŸš¶â€â™‚ï¸ğŸšªèƒŒäº•ç¦»ä¹¡ï¼Œåªèƒ½è¯´ï¼Œè¿™éƒ½æ˜¯<span class="FateSpan">å‘½è¿âš–ï¸</span>çš„å®‰æ’</p>
            <p>å½“åˆæŠ¥å¿—æ„¿çš„æ—¶å€™æˆ‘åŸºæœ¬ä¸Šéƒ½ç„å‡†ğŸ”è®¡ç®—æœºğŸ–¥ï¸å’Œåœ°ç†ğŸŒç›¸å…³çš„ä¸“ä¸šï¼Œå¤©å—æµ·åŒ—éƒ½æœ‰ï¼Œçœå†…çš„å ä¸€åŠå§</p>
            <p>æˆ‘çš„ä¸‹ä¸€ä¸ªå¿—æ„¿å°±åœ¨ç”šè‡³å°±åœ¨æ¸©å·ï¼ˆå¥½åƒæ˜¯ğŸ¤–æœºå™¨äººï¼Ÿï¼‰</p>
            <p style="margin-bottom: 10px;margin-top: 10px;font-size: 1.3rem;font-weight: bold;">æ€»ä¹‹ï¼Œåœ¨<span class="FateSpan">å‘½è¿</span>çš„å²”è·¯å£â†”ï¸ä¸Šï¼Œæˆ‘æœç€<span class="GIESpan">GIS</span>å‡ºå‘ğŸ›£ï¸äº†</p>
          </div>
          <div class="WaveDiv observe-animation fade-up" > <img src ="/logo/me.jpg"> </div>
          <div class="IntroduceContent observe-animation fade-up">
            <p>æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œæˆ‘å–œæ¬¢å¬éŸ³ä¹ğŸµã€çœ‹å°è¯´ğŸ“–ï¼Œå£å‘³å¾ˆæ‚ï¼Œå–œå¥½çº¯å‡­ç„å­¦
              <br>æ—¶é—´å¤šçš„è¯ä¹Ÿä¼šå¯åŠ¨ğŸ®Steamï¼ˆåšå¾·ä¹‹é—¨çœŸå¥½ç©ï¼‰ï¼Œå¤©æ°”å¥½â˜€ï¸çš„è¯ï¼Œä¹Ÿä¼šé€‰æ‹©å‡ºå»éª‘è½¦ğŸš´â€â™€ã€æ•£æ­¥ğŸš¶â€â™€
            </p>
            <p>ä¸Šäº†å¤§å­¦ğŸ«åï¼Œæœ‰äº†è®¸å¤šæ–°çš„ç»å†â›µï¼Œä¹Ÿåšäº†ä¸å°‘äº‹ğŸ’ªï¼Œæ‹¿åˆ°äº†ä¸€äº›æˆç»©ğŸ¥‡ï¼Œä¹Ÿç»å†äº†æŒ«æŠ˜ğŸ¥€</p>
            <p>æ„Ÿè§‰è‡ªå·±æˆé•¿ğŸš€äº†è®¸å¤šï¼Œä¹Ÿè¶Šæ¥è¶Šè®¤è¯†åˆ°è‡ªå·±æˆé•¿å¾—è¿˜è¿œè¿œä¸å¤Ÿ</p>
            <p style="margin-bottom: 10px;margin-top: 10px;font-size: 1.3rem;font-weight: bold;">è¿˜æœ‰æ›´å¤šçš„äº‹ï¼Œåœ¨<span class="FutureSpan">æœªæ¥ğŸ”œğŸ•°ï¸</span>ï¼Œç­‰ç€æˆ‘</p>
          </div>
        </div>
        <div>        
        </div>
      </div>
      <div class="timeline-container">
        <!-- æ—¶é—´çº¿è½´çº¿ -->
        <div class="timeline-axis"></div>
        
        <!-- æ—¶é—´çº¿å†…å®¹ -->
        <div v-for="(yearItem, yearIndex) in timelineData" :key="yearIndex" class="timeline-year">
          <!-- å¹´ä»½èŠ‚ç‚¹ -->
          <div class="year-bubble">
            {{ yearItem.year }}
          </div>

          <!-- æ—¶é—´æˆ³èŠ‚ç‚¹ -->
          <div v-for="(stamp, stampIndex) in yearItem.timeStamp" 
              :key="stampIndex"
              class="timestamp-node"
              :class="{ 
                'left-side observe-animation slide-left': (yearStartIndices[yearIndex] + stampIndex) % 2 === 0,
                'right-side observe-animation slide-right': (yearStartIndices[yearIndex] + stampIndex) % 2 !== 0 
              }">
            
            <!-- æ—¶é—´æˆ³æ ‡è®° -->
            <div class="timestamp-marker">
              <img v-if="stamp.icon" :src="stamp.icon" class="icon-image">
              <div v-else class="default-dot"></div>
            </div>

            <!-- æ—¶é—´æˆ³å†…å®¹ -->
            <div class="timestamp-content">
              <div v-if="stamp.time" class="time-text">{{ stamp.time }}</div>
              <div v-if="stamp.title" class="title-text">{{ stamp.title }}</div>
              <div v-if="stamp.address" class="address-text">{{ stamp.address }}</div>
              <div v-if="stamp.description" 
                  class="description-text"
                  v-html="formatDescription(stamp.description, stamp.tag)">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div  class="IntroduceContent IntroduceContent">
        <p class="observe-animation fade-up">å–œæ¬¢<span class="CodeSpan">ç¼–ç¨‹</span>ï¼Œæ˜¯å–œæ¬¢è¿™æ ·æœ‰ä¸€ä¸ªæ–¹ä¾¿çš„å·¥å…·ğŸ”§ï¼Œå¯ä»¥å®ç°å„ç§å„æ ·çš„æƒ³æ³•ğŸ’¡</p>
        <p class="observe-animation fade-up">åœ¨<span class="CreateSpan">åˆ›é€ </span>âœ¨ä¸­ï¼Œæˆ‘æ”¶è·äº†äººç”Ÿä¹è¶£å’Œæ„ä¹‰ğŸ˜„ğŸ‰ğŸ’•</p>
        <div class="WaveDiv observe-animation fade-up" style="margin-top: 4rem;" >
          <a href="https://pcn3drz8fct9.feishu.cn/wiki/TWMkwDadUis9Gnk243pcOdSznsg?from=from_copylink" target="_blank" rel="noopener">ç®€å†</a>
        </div>      
      </div>
  </div>
  
</template>

<script lang="ts">
import { defineComponent, computed } from 'vue';
import timelineData from '../../public/TimeLine.json';

// å®Œå–„ç±»å‹å®šä¹‰
interface TimeStampItem {
  time?: string;
  title?: string;
  address?: string;
  description?: string;
  tag?: string;
  icon?: string;
}

interface YearItem {
  year: string;
  timeStamp: TimeStampItem[]; // ä» any[] æ”¹ä¸ºå…·ä½“ç±»å‹
}

export default defineComponent({
  setup() {
    // ä¿®æ”¹è®¡ç®—å±æ€§é€»è¾‘ï¼ˆæ·»åŠ ç©ºå€¼ä¿æŠ¤ï¼‰
    const yearStartIndices = computed<number[]>(() => {
      let count = 0;
      return (timelineData as YearItem[]).map(year => {
        const start = count;
        // æ·»åŠ ç©ºå€¼ä¿æŠ¤
        count += year.timeStamp?.length || 0;
        return start;
      });
    });


    const formatDescription = (desc: string, tag: string) => {
      if (!tag) return desc.replace(/\n/g, '<br>');
      const parts = desc.split(tag);
      return `${parts[0]}<span class="highlight-tag">${tag}</span>${parts.slice(1).join('')}`;
    };

    return {
      timelineData,
      formatDescription,
      yearStartIndices
    };
  },
  mounted() {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            if (entry.isIntersecting) {
              const parent = entry.target.parentNode as HTMLElement;
              if (parent) {
                const index = Array.from(parent.children).indexOf(entry.target);
                (entry.target as HTMLElement).style.animationDelay = `${index * 0.1}s`;// æ ¹æ®ç´¢å¼•è®¾ç½®äº¤é”™åŠ¨ç”»å»¶è¿Ÿï¼Œ
              }
              entry.target.classList.add('animate-active');
              observer.unobserve(entry.target);
            }
          }
        });
      }, {
        rootMargin: window.innerWidth < 768 ? '-50px 0px' : '0px',
        threshold: 0.2, // å…ƒç´ å¯è§30%æ—¶è§¦å‘
      });

      // è§‚å¯Ÿæ‰€æœ‰å¸¦ observe-animation ç±»çš„å…ƒç´ 
      document.querySelectorAll('.observe-animation').forEach(el => {
        observer.observe(el);
      });
  },
});
</script>

<style scoped>




.IntroduceContent {
  text-align: center;
  margin-top: 2rem;
  margin-bottom: 2rem;
  font: 1.2em sans-serif;
}

.IntroduceContent p{
  margin-bottom: 5px;
}

.WaveDiv {
  display: inline-block; /* ä½¿å®¹å™¨å°ºå¯¸è´´åˆå†…å®¹ */
  position: relative;
  margin: 2%;
  /* background-color: var(--color-img-wave); */
  border-radius: 50%;
}

.WaveDiv a{
  position: relative;
  z-index: 1; /* ç¡®ä¿å›¾ç‰‡åœ¨æ³¢çº¹ä¸Šæ–¹ */
  font-size:2.5rem;
  font-weight: bold;
  padding-top: 25px;
  padding-left: 15px;
  padding-right: 15px;
  border-radius: 90%;
  object-fit: cover;
  display: block;
  margin: 0 auto;
  /* æ–°å¢ç¾åŒ–å±æ€§ */
  transition: all 0.3s ease; /* æ·»åŠ è¿‡æ¸¡åŠ¨ç”» */
  aspect-ratio: 1/1; /* å¼ºåˆ¶1:1æ¯”ä¾‹ */
}

.WaveDiv img {
  position: relative;
  z-index: 1; /* ç¡®ä¿å›¾ç‰‡åœ¨æ³¢çº¹ä¸Šæ–¹ */
  width: 15rem;
  height: auto;
  border-radius: 50%;
  object-fit: cover;
  display: block;
  margin: 0 auto;
  /* æ–°å¢ç¾åŒ–å±æ€§ */
  border: 6px solid var(--color-img-wave); 
  transition: all 0.3s ease; /* æ·»åŠ è¿‡æ¸¡åŠ¨ç”» */
  aspect-ratio: 1/1; /* å¼ºåˆ¶1:1æ¯”ä¾‹ */

}

.WaveDiv:hover::before,
.WaveDiv:hover::after {
  animation: 
    ripple 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite,
    colorShift 1s ease-in-out infinite;
}

.WaveDiv:hover img {
  transform: scale(1.1); /* æ‚¬åœæ”¾å¤§ */
  filter: brightness(1.02); /* è½»å¾®æäº® */
}

@keyframes colorShift {
  0%, 100% { border-color: var(--color-img-wave); }
  50% { border-color: rgba(255, 255, 255, 0.4); }
}

/* è°ƒæ•´æ³¢çº¹å®šä½é€»è¾‘ */
.WaveDiv::before,
.WaveDiv::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: calc(100% + 20px); /* æ³¢çº¹å¤§å° */
  height: calc(100% + 20px);
  border: 10px solid var(--color-img-wave); /* ä¸»è‰²è°ƒ */
  border-radius: 50%;
  animation: ripple 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  pointer-events: none; /* é˜²æ­¢ç‚¹å‡»ç©¿é€ */
}

/* ç²¾å‡†æ³¢çº¹æ‰©æ•£è®¡ç®— */
@keyframes ripple {
  0% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
    border-width: 2px;
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(1.5);
    border-width: 0;
  }
}

/* ç¬¬äºŒä¸ªæ³¢çº¹å»¶è¿Ÿ */
.WaveDiv::after {
  animation-delay: 0.8s;
}

@keyframes ripple {
  0% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(0.9);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(1.3);
  }
}

p {
  text-align: center;
}

.timeline-container {
  position: relative;
  max-width: 1200px;
  margin: 0 auto;
  margin-top: 5rem;
  padding: 40px 0;
}

.timeline-axis {
  position: absolute;
  left: 50%;
  width: 4px;
  background:var(--color-timeline-axis);
  top: 0;
  bottom: 0;
  transform: translateX(-50%);
}

.timeline-year {
  position: relative;
  padding: 20px 0;
}

.year-bubble {
  position: relative;
  left: 50%;
  transform: translateX(-50%);
  background: var(--color-year-bubble);
  padding: 8px 16px;
  border-radius: 4px;
  display: inline-block;
  margin: 20px 0;
  font-weight: bold;
}

/* ä¿®æ”¹ä»¥ä¸‹æ ·å¼ */
.timestamp-node {
  position: relative;
  width: 100%;  /* æ”¹ä¸ºå…¨å®½ */
  padding: 20px 0;
}

.left-side {
  left: 0;
  padding-right: 38%; /* æ·»åŠ å³ä¾§ç•™ç™½ */
  text-align: right;
}

.right-side {
  left: 0;
  padding-left: 50%; /* æ·»åŠ å·¦ä¾§ç•™ç™½ */
  text-align: left;
}

.timestamp-marker {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%); /* åŒé‡å±…ä¸­ */
  z-index: 1; /* ç¡®ä¿åœ¨è½´çº¿ä¸Šæ–¹ */
  width: 24px;
  height: 24px;
}

/* æ–°å¢è½´çº¿ä¸Šæ–¹é®ç›– */
.timeline-axis::after {
  content: '';
  position: absolute;
  left: -8px;
  right: -8px;
  top: -8px;
  bottom: -8px;
  z-index: 0;
}

.default-dot {
  width: 16px;
  height: 16px;
  background: var(--color-default-dot);
  border-radius: 50%;
  margin: 4px;
}

.icon-image {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  object-fit: cover;
  background: var(--color-default-dot);
  border-radius: 50%;
}

.timestamp-content {
  width: 80%;
  padding: 0 30px;
}

.time-text {
  font-size: 0.8em;
  color: var(--color-slim-text);
}

.title-text {
  font-size: 1.2em;
  font-weight: bold;
  margin: 4px 0;
}

.address-text {
  font-size: 0.9em;
  color: var(--color-slim-text);
}

.description-text {
  font-size: 1em;
  margin-top: 8px;
  line-height: 1.4;
}

::v-deep(.highlight-tag) {
  color: #1c1c34;
  background: #6BD0A880;
  padding: 2px 4px;
  border-radius: 3px;
  display: inline-block; /* æ–°å¢ */
  line-height: 1.2; /* æ–°å¢ */
}
</style>